<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Digital Business</title>
    <link rel="stylesheet" href="css/loading-bar.min.css">
    <link rel="stylesheet" href="css/styles.css">
    <!-- <script src="https://aframe.io/releases/0.7.0/aframe.min.js"></script> -->

    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
    <script>

        var fisrtScreen = false;

        AFRAME.registerComponent('rotation-reader', {
            tick: function () {
                this.el.object3D.rotation.x = 0;

                if (this.el.object3D.rotation.y < 0 && !fisrtScreen) {
                    gsap.to(container, 1, { opacity: 1, ease: "power2.out" });
                    gsap.to(".loading-screen", .3, { opacity: 0, display: 'none', ease: "power2.out" });
                    fisrtScreen = true;
                    this.el.object3D.rotation.y = 0;
                }

            }
        });

        // Criando propriedade 
        AFRAME.registerComponent('navigate-on-click', {
            schema: {
                url: { default: '' }
            },
            init: function () {
                var data = this.data;
                var el = this.el;

                el.addEventListener('click', function () {
                    window.open(data.url);
                });
            }
        });

    </script>
</head>

<body>

    <div class="container">
        <a-scene vr-mode-ui="enabled: false" cursor="rayOrigin: mouse">
            <!-- ASSETS -->
            <a-assets>
                <img src="assets/bg.png" id="sea">
                <img src="assets/bg-logo.png" id="logo-bg">
                <img src="assets/bg-text.png" id="bg-text">
            </a-assets>

            <!-- LIGHTS -->
            <a-entity light="type: ambient; intensity: 1">
            </a-entity>

            <!-- CAMERA RIG -->
            <a-entity id="rig" position="0 4 0" rotation="0 0 0">
                <a-camera id="camera" position="0 -3 0" wasd-controls-enabled="false" rotation="0 0 0" far="1000" fov="50" rotation-reader look-controls animation__rotateCamera="property: rotation; startEvents: rotateCamera;" animation__moveCamera="property: position; startEvents: moveCamera;">
                </a-camera>
            </a-entity>

            <!-- PLANE -->
            <a-plane id="floor" color="#1F58AF" material="src: #sea" geometry="" rotation="-90 0 0" scale="20 20" position="0 -9.9 0"></a-plane>
            <!-- SEA -->
            <a-cylinder id="sea" segments-height="4" segments-radial="30" material="shader: flat; side: back; transparent: true; src: #sea" radius="3" rotation="0 -165 0" position="0 1 0" scale="3 6 3" open-ended="true">
            </a-cylinder>

            <!-- CENTER IMAGE -->
            <a-entity>
                <a-image src="#bg-text" position="0 -1 -5" width="2" height="0.05" rotation="0 0 0"></a-image>
            </a-entity>

        </a-scene>
    </div>

    <div class="loading-screen">

        <div id="load-bg"></div>
        <div id="loading-elements">
            <div id="dia-mulher-text">
                <img src="assets/dia-mulher-text.png" class="dia-mulher-text">
            </div>
            <div id="logo-text">
                <img src="assets/logo-text.png" class="logo-text">
            </div>

            <div id="phone-container">
                <img src="assets/phone.png" class="pos-r phone-anim">
                <img src="assets/phone-arrow.png" class="pos-a arrow-anim">
            </div>

            <div id="loading-text">
                <img src="assets/page-1-text.png" class="loading-text-anim">
            </div>

            <div id="logo">
                <img src="assets/logo-db.png" class="logo-db-anim">
            </div>
        </div>

    </div>

    <!-- SCRIPTS -->
    <script src="js/loading-bar.min.js"></script>
    <script src="js/gsap.js"></script>
    <script src="js/index.js"></script>
</body>

</html>